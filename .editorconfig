root = true

# ── All files ──
[*]
indent_style = space
indent_size = 4
end_of_line = crlf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

# ── JSON / YAML ──
[*.{json,yml,yaml}]
indent_size = 2

# ── C# files ──
[*.cs]

# File-scoped namespaces (enforced)
csharp_style_namespace_declarations = file_scoped:error

# Implicit usings
dotnet_style_require_global_using = true

# var preferences
csharp_style_var_for_built_in_types = true:suggestion
csharp_style_var_when_type_is_apparent = true:suggestion
csharp_style_var_elsewhere = true:suggestion

# Expression-bodied members
csharp_style_expression_bodied_methods = when_on_single_line:suggestion
csharp_style_expression_bodied_constructors = when_on_single_line:suggestion
csharp_style_expression_bodied_properties = true:suggestion
csharp_style_expression_bodied_accessors = true:suggestion

# Pattern matching
csharp_style_pattern_matching_over_is_with_cast_check = true:warning
csharp_style_pattern_matching_over_as_with_null_check = true:warning

# Null checking
csharp_style_throw_expression = true:suggestion
csharp_style_conditional_delegate_call = true:suggestion
dotnet_style_coalesce_expression = true:warning
dotnet_style_null_propagation = true:warning

# Prefer readonly / const
dotnet_style_readonly_field = true:warning

# Prefer simplified boolean expressions
dotnet_style_prefer_simplified_boolean_expressions = true:warning

# Prefer compound assignment
dotnet_style_prefer_compound_assignment = true:suggestion

# ── Performance analyzers ──

# CA1822: Mark members as static (avoids implicit 'this' capture)
dotnet_diagnostic.CA1822.severity = warning

# CA1825: Avoid zero-length array allocations (use Array.Empty<T>())
dotnet_diagnostic.CA1825.severity = warning

# CA1826: Use property instead of Linq Enumerable method (Count vs .Count())
dotnet_diagnostic.CA1826.severity = warning

# CA1827: Do not use Count/LongCount when Any can be used
dotnet_diagnostic.CA1827.severity = warning

# CA1829: Use Length/Count property instead of Enumerable.Count method
dotnet_diagnostic.CA1829.severity = warning

# CA1832-CA1835: Use AsSpan/AsMemory instead of Range-based indexers / Substring
dotnet_diagnostic.CA1832.severity = suggestion
dotnet_diagnostic.CA1833.severity = suggestion
dotnet_diagnostic.CA1834.severity = suggestion
dotnet_diagnostic.CA1835.severity = suggestion

# CA1836: Prefer IsEmpty over Count when available
dotnet_diagnostic.CA1836.severity = warning

# CA1841: Prefer Dictionary Contains methods
dotnet_diagnostic.CA1841.severity = warning

# CA1845: Use span-based string.Concat
dotnet_diagnostic.CA1845.severity = suggestion

# CA1846: Prefer AsSpan over Substring
dotnet_diagnostic.CA1846.severity = suggestion

# CA1847: Use char literal for single-character string lookups
dotnet_diagnostic.CA1847.severity = warning

# CA1850: Prefer static HashData over ComputeHash
dotnet_diagnostic.CA1850.severity = warning

# CA1854: Prefer IDictionary.TryGetValue
dotnet_diagnostic.CA1854.severity = warning

# CA1858: Use StartsWith(char) instead of StartsWith(string)
dotnet_diagnostic.CA1858.severity = suggestion

# CA1860: Avoid using Enumerable.Any() extension method (use .Count != 0 or .Length != 0)
dotnet_diagnostic.CA1860.severity = suggestion

# CA1861: Avoid constant arrays as arguments (prefer static readonly)
dotnet_diagnostic.CA1861.severity = warning

# CA1862: Use StringComparison overloads
dotnet_diagnostic.CA1862.severity = warning

# CA2000: Dispose objects before losing scope
dotnet_diagnostic.CA2000.severity = warning

# CA2016: Forward CancellationToken
dotnet_diagnostic.CA2016.severity = warning

# CA2254: Template should be static expression (logging)
dotnet_diagnostic.CA2254.severity = warning

# ── Solution files ──
[*.sln]
indent_style = tab

[*.csproj]
indent_size = 2
